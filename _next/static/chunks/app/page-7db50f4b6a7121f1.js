(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{2385:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>ed});var a=r(5155),o=r(2115),n=r(792),s=r(381),l=r(9708),i=r(2085),c=r(2596),d=r(9688);function u(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,d.QP)((0,c.$)(t))}let m=(0,i.F)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),g=o.forwardRef((e,t)=>{let{className:r,variant:o,size:n,asChild:s=!1,...i}=e,c=s?l.DX:"button";return(0,a.jsx)(c,{className:u(m({variant:o,size:n,className:r})),ref:t,...i})});g.displayName="Button";var p=r(5452),f=r(4416);let h=p.bL,x=p.l9,y=p.ZL;p.bm;let b=o.forwardRef((e,t)=>{let{className:r,...o}=e;return(0,a.jsx)(p.hJ,{ref:t,className:u("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",r),...o})});b.displayName=p.hJ.displayName;let v=o.forwardRef((e,t)=>{let{className:r,children:o,...n}=e;return(0,a.jsxs)(y,{children:[(0,a.jsx)(b,{}),(0,a.jsxs)(p.UC,{ref:t,className:u("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",r),...n,children:[o,(0,a.jsxs)(p.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,a.jsx)(f.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});v.displayName=p.UC.displayName;let w=e=>{let{className:t,...r}=e;return(0,a.jsx)("div",{className:u("flex flex-col space-y-1.5 text-center sm:text-left",t),...r})};w.displayName="DialogHeader";let k=o.forwardRef((e,t)=>{let{className:r,...o}=e;return(0,a.jsx)(p.hE,{ref:t,className:u("text-lg font-semibold leading-none tracking-tight",r),...o})});k.displayName=p.hE.displayName;let j=o.forwardRef((e,t)=>{let{className:r,...o}=e;return(0,a.jsx)(p.VY,{ref:t,className:u("text-sm text-muted-foreground",r),...o})});j.displayName=p.VY.displayName;var N=r(704);let S=N.bL,A=o.forwardRef((e,t)=>{let{className:r,...o}=e;return(0,a.jsx)(N.B8,{ref:t,className:u("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",r),...o})});A.displayName=N.B8.displayName;let T=o.forwardRef((e,t)=>{let{className:r,...o}=e;return(0,a.jsx)(N.l9,{ref:t,className:u("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",r),...o})});T.displayName=N.l9.displayName;let C=o.forwardRef((e,t)=>{let{className:r,...o}=e;return(0,a.jsx)(N.UC,{ref:t,className:u("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",r),...o})});C.displayName=N.UC.displayName;var M=r(968);let z=(0,i.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),R=o.forwardRef((e,t)=>{let{className:r,...o}=e;return(0,a.jsx)(M.b,{ref:t,className:u(z(),r),...o})});R.displayName=M.b.displayName;let E=o.forwardRef((e,t)=>{let{className:r,type:o,...n}=e;return(0,a.jsx)("input",{type:o,className:u("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",r),ref:t,...n})});E.displayName="Input";var _=r(2697),V=r(6474),D=r(7863),L=r(5196);let P=_.bL;_.YJ;let F=_.WT,O=o.forwardRef((e,t)=>{let{className:r,children:o,...n}=e;return(0,a.jsxs)(_.l9,{ref:t,className:u("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",r),...n,children:[o,(0,a.jsx)(_.In,{asChild:!0,children:(0,a.jsx)(V.A,{className:"h-4 w-4 opacity-50"})})]})});O.displayName=_.l9.displayName;let U=o.forwardRef((e,t)=>{let{className:r,...o}=e;return(0,a.jsx)(_.PP,{ref:t,className:u("flex cursor-default items-center justify-center py-1",r),...o,children:(0,a.jsx)(D.A,{className:"h-4 w-4"})})});U.displayName=_.PP.displayName;let q=o.forwardRef((e,t)=>{let{className:r,...o}=e;return(0,a.jsx)(_.wn,{ref:t,className:u("flex cursor-default items-center justify-center py-1",r),...o,children:(0,a.jsx)(V.A,{className:"h-4 w-4"})})});q.displayName=_.wn.displayName;let I=o.forwardRef((e,t)=>{let{className:r,children:o,position:n="popper",...s}=e;return(0,a.jsx)(_.ZL,{children:(0,a.jsxs)(_.UC,{ref:t,className:u("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===n&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",r),position:n,...s,children:[(0,a.jsx)(U,{}),(0,a.jsx)(_.LM,{className:u("p-1","popper"===n&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:o}),(0,a.jsx)(q,{})]})})});I.displayName=_.UC.displayName,o.forwardRef((e,t)=>{let{className:r,...o}=e;return(0,a.jsx)(_.JU,{ref:t,className:u("py-1.5 pl-8 pr-2 text-sm font-semibold",r),...o})}).displayName=_.JU.displayName;let W=o.forwardRef((e,t)=>{let{className:r,children:o,...n}=e;return(0,a.jsxs)(_.q7,{ref:t,className:u("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",r),...n,children:[(0,a.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(_.VF,{children:(0,a.jsx)(L.A,{className:"h-4 w-4"})})}),(0,a.jsx)(_.p4,{children:o})]})});W.displayName=_.q7.displayName,o.forwardRef((e,t)=>{let{className:r,...o}=e;return(0,a.jsx)(_.wv,{ref:t,className:u("-mx-1 my-1 h-px bg-muted",r),...o})}).displayName=_.wv.displayName;var J=r(4059),B=r(9428);let G=o.forwardRef((e,t)=>{let{className:r,...o}=e;return(0,a.jsx)(J.bL,{className:u("grid gap-2",r),...o,ref:t})});G.displayName=J.bL.displayName;let Z=o.forwardRef((e,t)=>{let{className:r,...o}=e;return(0,a.jsx)(J.q7,{ref:t,className:u("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",r),...o,children:(0,a.jsx)(J.C1,{className:"flex items-center justify-center",children:(0,a.jsx)(B.A,{className:"h-2.5 w-2.5 fill-current text-current"})})})});function H(){let[e,t]=(0,o.useState)(!1),[r,n]=(0,o.useState)(null),[l,i]=(0,o.useState)(!1),[c,d]=(0,o.useState)(""),u=[{value:"whisper_base_f32",label:"Whisper Base f32 (Heavier)"},{value:"whisper_base_q4",label:"Whisper Base q4 (Lighter)"}],m={stt:{whisperModel:u[0].value},llm:{type:"local",localModel:"qwen3-0.6b",openai:{apiToken:"",baseUrl:"https://api.openai.com/v1",modelName:"gpt-4"}}},[p,f]=(0,o.useState)(m),y=(0,o.useCallback)(()=>m,[]);(0,o.useEffect)(()=>{let t=!0,r=async()=>{if(!t)return;i(!1);let e=!1,r="";if("undefined"!=typeof navigator&&navigator.gpu)try{await navigator.gpu.requestAdapter()?(e=!0,r="WebGPU is supported."):r="WebGPU is available but no adapter found. Local model disabled."}catch(e){r="WebGPU not supported: ".concat(e.message||"Unknown error",". Local model disabled.")}else r="WebGPU is not supported by this browser. Local model disabled.";t&&(n(e),d(r),i(!0));let a=localStorage.getItem("notedPakSettings"),o=JSON.parse(JSON.stringify(y()));if(a)try{let e=JSON.parse(a);e.stt&&e.llm&&e.llm.openai?o=e:(console.warn("Stored settings have unexpected structure, using defaults."),localStorage.setItem("notedPakSettings",JSON.stringify(o)))}catch(e){console.error("Failed to parse settings from localStorage, using defaults:",e),localStorage.setItem("notedPakSettings",JSON.stringify(o))}else localStorage.setItem("notedPakSettings",JSON.stringify(o));e||"local"!==o.llm.type||(o.llm.type="openai"),t&&f(o)};return e&&r(),()=>{t=!1}},[e,y]);let b=(e,t)=>{f(r=>({...r,stt:{...r.stt,[e]:t}}))},N=(e,t)=>{f(r=>({...r,llm:{...r.llm,[e]:t}}))},M=(e,t)=>{f(r=>({...r,llm:{...r.llm,openai:{...r.llm.openai,[e]:t}}}))};return(0,a.jsxs)(h,{open:e,onOpenChange:t,children:[(0,a.jsx)(x,{asChild:!0,children:(0,a.jsxs)(g,{variant:"outline",size:"icon",className:"ml-auto",children:[(0,a.jsx)(s.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Open settings"})]})}),(0,a.jsxs)(v,{className:"sm:max-w-[600px]",children:[(0,a.jsxs)(w,{children:[(0,a.jsx)(k,{children:"Settings"}),(0,a.jsx)(j,{children:"Configure your speech-to-text and language model settings."})]}),(0,a.jsxs)(S,{defaultValue:"stt",className:"w-full",children:[(0,a.jsxs)(A,{className:"grid w-full grid-cols-2",children:[(0,a.jsx)(T,{value:"stt",children:"Speech-to-Text"}),(0,a.jsx)(T,{value:"llm",children:"Language Model"})]}),(0,a.jsx)(C,{value:"stt",className:"space-y-4",children:(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(R,{htmlFor:"whisper-model",children:"Whisper Model"}),(0,a.jsxs)(P,{value:p.stt.whisperModel,onValueChange:e=>b("whisperModel",e),children:[(0,a.jsx)(O,{id:"whisper-model",children:(0,a.jsx)(F,{placeholder:"Select a Whisper model"})}),(0,a.jsx)(I,{children:u.map(e=>(0,a.jsx)(W,{value:e.value,children:e.label},e.value))})]})]})}),(0,a.jsx)(C,{value:"llm",className:"space-y-4",children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)(R,{children:"Model Type"}),(0,a.jsxs)(G,{value:p.llm.type,onValueChange:e=>N("type",e),className:"flex flex-col space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(Z,{value:"local",id:"local",disabled:!r&&l}),(0,a.jsx)(R,{htmlFor:"local",className:!r&&l?"text-muted-foreground":"",children:"Local Model"})]}),l&&!r&&(0,a.jsx)("p",{className:"ml-6 text-sm text-destructive",children:c||"Local model disabled due to WebGPU unavailability."}),"local"===p.llm.type&&r&&l&&(0,a.jsxs)("div",{className:"ml-6 space-y-2",children:[(0,a.jsx)(R,{htmlFor:"local-model",children:"Select Local Model"}),(0,a.jsxs)(P,{value:p.llm.localModel,onValueChange:e=>N("localModel",e),disabled:!r,children:[(0,a.jsx)(O,{id:"local-model",children:(0,a.jsx)(F,{placeholder:"Select a local model"})}),(0,a.jsx)(I,{children:[{value:"qwen3-0.6b",label:"Qwen3 0.6B"}].map(e=>(0,a.jsx)(W,{value:e.value,children:e.label},e.value))})]})]}),"local"===p.llm.type&&!r&&l&&(0,a.jsx)("div",{className:"ml-6 space-y-2",children:(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Local model selection is unavailable."})}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(Z,{value:"openai",id:"openai"}),(0,a.jsx)(R,{htmlFor:"openai",children:"OpenAI Model"})]}),"openai"===p.llm.type&&(0,a.jsxs)("div",{className:"ml-6 space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(R,{htmlFor:"api-token",children:"API Token"}),(0,a.jsx)(E,{id:"api-token",type:"password",placeholder:"Enter your OpenAI API token",value:p.llm.openai.apiToken,onChange:e=>M("apiToken",e.target.value)})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(R,{htmlFor:"base-url",children:"Base URL"}),(0,a.jsx)(E,{id:"base-url",placeholder:"https://api.openai.com/v1",value:p.llm.openai.baseUrl,onChange:e=>M("baseUrl",e.target.value)})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(R,{htmlFor:"model-name",children:"Model Name"}),(0,a.jsx)(E,{id:"model-name",placeholder:"gpt-4",value:p.llm.openai.modelName,onChange:e=>M("modelName",e.target.value)})]})]})]})]})})]}),(0,a.jsxs)("div",{className:"flex justify-end space-x-2 pt-4",children:[(0,a.jsx)(g,{variant:"outline",onClick:()=>{let e=localStorage.getItem("notedPakSettings");if(e)try{let t=JSON.parse(e);t.stt&&t.llm&&f(t)}catch(e){console.error("Failed to parse settings from localStorage on cancel:",e)}t(!1)},children:"Cancel"}),(0,a.jsx)(g,{onClick:()=>{localStorage.setItem("notedPakSettings",JSON.stringify(p)),console.log("Saving settings:",p),t(!1)},children:"Save Settings"})]})]})]})}Z.displayName=J.q7.displayName;var Y=r(3056);class Q{_getLongestCommonTokenPrefix(e,t){let r=e.match(/\S+|\s+/g)||[],a=t.match(/\S+|\s+/g)||[],o="",n=0;for(;n<r.length&&n<a.length&&r[n]===a[n];)o+=r[n],n++;return o}process(e){let t="";if(""===this._previousFullASROutput);else{let r=this._getLongestCommonTokenPrefix(this._previousFullASROutput,e);r.length>this._emittedText.length&&(t=r.substring(this._emittedText.length)),this._emittedText+=t}return this._previousFullASROutput="string"==typeof e?e:"",t}reset(){this._previousFullASROutput="",this._emittedText=""}getEmittedText(){return this._emittedText}getCurrentFullASROutput(){return this._previousFullASROutput}getUnconfirmedPart(){return this._previousFullASROutput.length>this._emittedText.length?this._previousFullASROutput.substring(this._emittedText.length):""}constructor(){this._previousFullASROutput="",this._emittedText=""}}let X=null,$="unloaded",K=new Q,ee="",et=null,er=null,ea=()=>{X||((X=new Worker(r.tu(new URL(r.p+r.u(63),r.b)),{type:void 0})).onmessage=e=>{let{status:t,output:r,error:a,data:o,stack:n}=e.data;switch(t){case"loading":$="loading",er&&er({status:o||"Loading model resources..."});break;case"ready":$="ready",er&&er({status:"Model loaded successfully. Ready to transcribe."});break;case"start":et&&et({type:"start",message:"Worker reported: Transcription process started."});break;case"update":if(et&&"string"==typeof r){""!==r.trim()&&(ee+=(ee?" ":"")+r.trim());let e=K.process(ee),t=K.getUnconfirmedPart(),a=K.getEmittedText();et({type:"update",newlyConfirmedText:e,unconfirmedText:t,fullConfirmedText:a})}break;case"complete":et&&et({type:"complete",message:"Segment processed."});break;case"busy":console.warn("Transcription worker is busy."),et&&et({type:"error",message:"Worker is busy. Please wait."});break;case"error":$="error",console.error("Error from worker:",a,n),er&&"ready"!==$?er({status:"Error: ".concat(a),error:!0}):et&&et({type:"error",message:"Transcription error: ".concat(a)});break;default:e.data.status&&er&&"loading"===$&&er(e.data)}},X.onerror=e=>{console.error("Unhandled error in transcription worker:",e),$="error",er?er({status:"Worker error: ".concat(e.message),error:!0}):et&&et({type:"error",message:"Worker error: ".concat(e.message)}),X.terminate(),X=null})},eo=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(ea(),er=e,t)console.log("transcriptionService: loadModel called for specific model name: ".concat(t)),$="loading",X.postMessage({type:"load",data:{modelName:t}});else{if("ready"===$)return er&&er({status:"Model already loaded."}),!0;if("loading"===$)return er&&er({status:"Model loading is already in progress."}),!1;$="loading",X.postMessage({type:"load"})}return new Promise((e,t)=>{let r=er,a=a=>{"ready"===a.status?e(!0):a.error&&t(Error(a.status)),er=r};er=e=>{r&&r(e),a(e)}})},en=(e,t,r)=>{if("ready"!==$||!X){console.warn("Model not ready or worker not initialized."),r&&r({type:"error",message:"Model not ready."});return}et=r,X.postMessage({type:"generate",data:{audio:e,language:t||"en"}},[e.buffer])},es=()=>"ready"===$,el=async()=>{X&&(X.terminate(),X=null,$="unloaded",K.reset(),ee="",console.log("Transcription worker terminated.")),et=null,er=null},ei=()=>{let[e,t]=(0,o.useState)(!1),[r,a]=(0,o.useState)(""),[n,s]=(0,o.useState)(""),[l,i]=(0,o.useState)(!1),[c,d]=(0,o.useState)(""),[u,m]=(0,o.useState)(!0),[g,p]=(0,o.useState)(!1),[f,h]=(0,o.useState)(!1),x=(0,o.useRef)(null),y=(0,o.useRef)(null),b=(0,o.useRef)(null),v=(0,o.useRef)(null),w=(0,o.useRef)(null),k=(0,o.useRef)(null),j=(0,o.useRef)(null),N=(0,o.useRef)(null),S=(0,o.useRef)(!1),A=(0,o.useRef)(null),T=(0,o.useRef)(e),C=(0,o.useRef)(g);(0,o.useEffect)(()=>{T.current=e},[e]),(0,o.useEffect)(()=>{C.current=g},[g]);let M=(0,o.useCallback)(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return new Promise(async t=>{if(l&&!e){console.log("Transcription model already loaded and no specific model name requested."),t(!0);return}if(S.current&&!e){console.log("Transcription model loading is already in progress."),t(!1);return}S.current=!0,d("Initializing transcription model loading".concat(e?" for ".concat(e):"","...")),console.log("Initializing transcription model loading".concat(e?" for ".concat(e):"","..."));let r=!1;try{await eo(e=>{let a=e.status;e.file&&void 0!==e.progress?a="Loading ".concat(e.file,": ").concat(Math.round(e.progress),"%"):e.file&&(a="Loading ".concat(e.file,"...")),console.log(a),d(a),"Model loaded successfully. Ready to transcribe."===e.status?(i(!0),d("Transcription model loaded."),S.current=!1,r||(r=!0,t(!0))):e.error&&(console.log("Error loading transcription model: ".concat(e.error)),d("Error: ".concat(e.error)),i(!1),S.current=!1,r||(r=!0,t(!1)))},e),r||(r=!0,t(l))}catch(e){console.error("Load transcription model promise rejected:",e),console.log("Failed to load transcription model: ".concat(e.message)),i(!1),S.current=!1,r||(r=!0,t(!1))}})},[l]);(0,o.useEffect)(()=>{es()&&(i(!0),console.log("Transcription model is ready."))},[]),(0,o.useEffect)(()=>{A.current=e=>{switch(e.type){case"start":break;case"update":void 0!==e.fullConfirmedText&&a(e.fullConfirmedText),void 0!==e.unconfirmedText&&s(e.unconfirmedText);break;case"complete":S.current=!1;break;case"error":console.log(e.message),console.error("Transcription service error:",e.message),S.current=!1}}},[]);let z=(0,o.useCallback)(async e=>{N.current&&(N.current.destroy(),N.current=null,console.log("Previous VAD instance destroyed.")),w.current&&w.current.disconnect(),k.current&&k.current.disconnect(),w.current=null,k.current=null,b.current&&(b.current.getTracks().forEach(e=>e.stop()),b.current=null),j.current=null;let t=v.current;if(!t||"closed"===t.state)return console.log("AudioContext not ready. Cannot setup VAD."),console.error("AudioContext not ready for VAD setup."),!1;let r=null,a=x.current&&x.current.active&&x.current.getAudioTracks().length>0&&x.current.getAudioTracks()[0].enabled,o=y.current&&y.current.active&&!e&&y.current.getAudioTracks().length>0&&y.current.getAudioTracks()[0].enabled;if(console.log("setupVAD called. screenAudioActive: ".concat(a,", micAudioActiveAndUnmuted (based on currentMicMutedState: ").concat(!e,"): ").concat(o)),a&&o){console.log("Attempting to set up VAD with mixed audio (screen + mic).");try{w.current=t.createMediaStreamSource(x.current),k.current=t.createMediaStreamSource(y.current),j.current=t.createMediaStreamDestination(),w.current.connect(j.current),k.current.connect(j.current),b.current=j.current.stream,r=b.current}catch(e){return console.error("Error creating mixed audio stream:",e),console.log("Error mixing audio: ".concat(e.message)),!1}}else if(a)console.log("Setting up VAD with screen audio only."),r=x.current;else{if(!o)return console.log("No active audio streams for VAD (or mic is muted). VAD will not start processing new audio unless screen audio is active."),console.log(a?"Mic is muted. Using screen audio only for VAD.":"No active audio source for VAD."),N.current&&(N.current.destroy(),N.current=null),!0;console.log("Attempting to set up VAD with microphone audio only."),r=y.current}if(!r){if(console.log("Stream for VAD is null after selection logic, VAD will not start."),console.log("Failed to prepare audio stream for VAD."),N.current&&(N.current.destroy(),N.current=null),a&&!o)console.log("Setting up VAD with screen audio only (mic is muted or unavailable)."),r=x.current;else if(!a&&!o&&N.current)return console.log("No active streams, ensuring VAD is stopped."),N.current.destroy(),N.current=null,console.log("No active audio source. VAD stopped."),!0}if(!r)return console.log("VAD will not be started, streamForVAD is null after selection logic."),N.current&&(N.current.destroy(),N.current=null),console.log("No suitable audio stream for VAD. VAD stopped."),!0;console.log("VAD will attempt to use stream ID: ".concat(r.id,". Active: ").concat(r.active,". Tracks: ").concat(r.getAudioTracks().length));try{console.log("Attempting to create new MicVAD instance with selected stream.");let a=await Y.Jl.new({stream:r,audioContext:t,positiveSpeechThreshold:.7,negativeSpeechThreshold:.7-.15,minSpeechFrames:3,preSpeechPadFrames:1,redemptionFrames:2,onSpeechStart:()=>{console.log("VAD: Speech started"),console.log("VAD: Speech detected...")},onSpeechEnd:e=>{if(console.log("VAD: Speech ended. Audio data length: ".concat(e.length)),e.length>0&&T.current&&!C.current){if(S.current)return void console.log("VAD: Transcription worker busy, dropping this speech segment.");S.current=!0,console.log("VAD processing"),en(e,"en",A.current)}else 0===e.length?console.log("VAD: Speech ended but no audio data captured (or too short)."):C.current&&console.log("VAD: Speech ended, but transcription is paused. Audio ignored.")}});return N.current=a,C.current?(console.log("VAD configured, but remains paused."),console.log("VAD ready (paused). Mic ".concat(e?"muted":"unmuted","."))):(a.start(),console.log("VAD (re)started successfully with the new stream configuration."),console.log("VAD active. Mic ".concat(e?"muted":"unmuted","."))),!0}catch(e){return console.error("Error (re)initializing VAD with the new stream:",e),console.log("Error setting up VAD: ".concat(e.message)),N.current&&(N.current.destroy(),N.current=null),b.current&&(b.current.getTracks().forEach(e=>e.stop()),b.current=null),w.current&&w.current.disconnect(),k.current&&k.current.disconnect(),!1}},[]),R=(0,o.useCallback)(()=>{(T.current||x.current||y.current||N.current)&&(console.log("Stopping transcription and cleaning up resources..."),t(!1),N.current&&(N.current.destroy(),N.current=null,console.log("VAD destroyed.")),x.current&&(x.current.getTracks().forEach(e=>e.stop()),x.current=null,console.log("Screen share mediaStream tracks stopped.")),y.current&&(y.current.getTracks().forEach(e=>e.stop()),y.current=null,console.log("User microphone stream tracks stopped.")),b.current&&(b.current.getTracks().forEach(e=>e.stop()),b.current=null,console.log("Combined audio stream stopped.")),w.current&&(w.current.disconnect(),w.current=null),k.current&&(k.current.disconnect(),k.current=null),j.current=null,v.current&&"closed"!==v.current.state?v.current.close().then(()=>{console.log("AudioContext closed."),v.current=null}).catch(e=>{console.error("Error closing AudioContext:",e),v.current=null}):v.current&&"closed"===v.current.state&&(console.log("AudioContext was already closed."),v.current=null),S.current=!1,m(!0),p(!1),console.log("Transcription stopped. Resources cleaned up."))},[t,m,p]),E=(0,o.useCallback)(async()=>{h(!0);try{if(T.current)return void console.log("Transcription is already in progress.");let e=localStorage.getItem("notedPakSettings"),r=null;if(e)try{let t=JSON.parse(e);t.stt&&t.stt.whisperModel&&(r=t.stt.whisperModel)}catch(e){console.error("Failed to parse settings for starting transcription:",e)}if(console.log("Attempting to load model by name: ".concat(r||"default",". Current modelReady: ").concat(l)),!await M(r))return void console.log("Failed to load transcription model. Cannot start transcription.");if(!v.current||"closed"===v.current.state)try{v.current=new(window.AudioContext||window.webkitAudioContext)({sampleRate:16e3}),console.log("AudioContext created/recreated.")}catch(e){console.error("Failed to create AudioContext:",e),console.log("Audio system error: ".concat(e.message,". Cannot start transcription."));return}console.log("Requesting screen share permission...");let o=await navigator.mediaDevices.getDisplayMedia({video:!0,audio:{sampleRate:16e3,channelCount:1}});x.current=o;let n=o.getAudioTracks();if(0===n.length||!n[0].enabled||n[0].muted){console.log('Error: No active audio track from screen share. Ensure "Share tab audio" is checked and audio is playing.'),console.error("No active audio track found in screen share."),o.getTracks().forEach(e=>e.stop()),x.current=null;return}if(console.log("Screen share audio stream acquired."),t(!0),a(""),s(""),m(!0),p(!1),!await z(!0)){console.error("VAD setup failed during start transcription."),R(),console.log("Failed to initialize audio processing. Transcription stopped.");return}x.current.getTracks().forEach(e=>{e.onended=()=>{console.log("Screen share media stream track ended."),T.current&&(console.log("Screen share ended. Stopping transcription."),R())}}),console.log("Transcription started. Share a tab with audio. Mic is initially muted.")}catch(e){console.error("Error starting transcription:",e),console.log("Error starting transcription: ".concat(e.message,".")),x.current&&(x.current.getTracks().forEach(e=>e.stop()),x.current=null),t(!1)}finally{h(!1)}},[l,M,z,R,t,a,s,m,p]),_=(0,o.useCallback)(()=>{if(!T.current||C.current)return void console.log(C.current?"Transcription is already paused.":"Transcription is not active to pause.");N.current&&(N.current.pause(),console.log("VAD paused.")),p(!0),console.log("Transcription paused.")},[p]),V=(0,o.useCallback)(()=>{if(!T.current||!C.current)return void console.log(C.current?"Transcription is not active to resume.":"Transcription is not paused.");N.current&&(N.current.start(),console.log("VAD resumed.")),p(!1),console.log("Transcription resumed.")},[p]),D=(0,o.useCallback)(async()=>{let e;if(!T.current)return void console.log("Cannot toggle mic. Transcription is not active.");if(!v.current||"closed"===v.current.state){console.log("Audio system not ready. Cannot toggle mic."),console.error("AudioContext not ready for mic toggle.");return}if(u)try{y.current&&y.current.active||(console.log("Requesting microphone access for unmute..."),y.current=await navigator.mediaDevices.getUserMedia({audio:{sampleRate:16e3,channelCount:1},video:!1}),console.log("Microphone stream acquired for unmute.")),y.current.getAudioTracks().forEach(e=>e.enabled=!0),e=!1,m(!1),console.log("Mic tracks enabled, state set to unmuted.")}catch(t){console.error("Error accessing microphone during unmute attempt:",t),console.log("Error accessing microphone: ".concat(t.message)),y.current&&(y.current.getTracks().forEach(e=>e.stop()),y.current=null),e=!0,m(!0),await z(e);return}else y.current&&y.current.active&&(y.current.getAudioTracks().forEach(e=>e.enabled=!1),console.log("Microphone tracks disabled (for muting).")),e=!0,m(!0),console.log("State set to muted.");console.log("Calling setupVAD with newMutedState: ".concat(e)),await z(e)},[u,z,m]);return(0,o.useEffect)(()=>()=>{console.log("useTranscription hook unmounting. Cleaning up transcription resources..."),T.current&&R(),el().catch(e=>console.error("Error disposing transcription model on unmount:",e))},[R]),{isTranscribing:e,confirmedText:r,unconfirmedTextPreview:n,modelReady:l,isMicMuted:u,isPaused:g,modelLoadingProgress:c,isStarting:f,isProcessingAudioRef:S,handleStartTranscription:E,handleStopTranscription:R,handlePauseTranscription:_,handleResumeTranscription:V,handleToggleMic:D}},ec=()=>{let[e,t]=(0,o.useState)(""),[a,n]=(0,o.useState)(!1),[s,l]=(0,o.useState)(!1),[i,c]=(0,o.useState)(""),[d,u]=(0,o.useState)("answering"),m=(0,o.useRef)(null),g=(0,o.useRef)(!1),p=(0,o.useRef)(null);(0,o.useEffect)(()=>(m.current=new Worker(r.tu(new URL(r.p+r.u(528),r.b)),{type:void 0}),m.current.postMessage({type:"check_webgpu"}),m.current.onmessage=e=>{let{status:r,data:a,type:o,output:s,file:i,progress:d}=e.data,m=e.data.state;switch(m&&u(m),r){case"webgpu_check_success":console.log("WebGPU available. ".concat(a," Ready to load summarization model."));break;case"loading":let f=a;i&&void 0!==d?f="Loading ".concat(i,": ").concat(Math.round(d),"%"):i&&(f="Loading ".concat(i,"...")),console.log(f),c(f);break;case"summarization_ready":l(!0),g.current=!1,c("Summarization model loaded and ready."),console.log("Summarization model loaded and ready."),p.current&&p.current.resolve&&(p.current.resolve(!0),p.current=null);break;case"summarizing_started":n(!0),t(""),console.log("Summarization started... (".concat(m||"answering",")"));break;case"update":t(e=>e+s),console.log("Summarizing... (".concat(m||"answering",")"));break;case"summarizing_complete":n(!1),console.log("Summarization complete."),u("answering");break;case"summarization_interrupted":n(!1),console.log("Summarization interrupted."),u("answering");break;case"summarization_reset":t(""),console.log("Summarization reset. Ready for new summary."),u("answering");break;case"error":n(!1),console.error("Summarization Worker Error (".concat(o,"):"),a),c("Error: ".concat(a)),"load_model_error"===o&&(l(!1),g.current=!1,p.current&&p.current.reject&&(p.current.reject(Error(a||"Failed to load summarization model")),p.current=null)),u("answering");break;default:let h=r;i&&void 0!==d?h="Summarizer: ".concat(i," ").concat(Math.round(d),"%"):i&&(h="Summarizer: Loading ".concat(i,"...")),h&&console.log(h)}},()=>{m.current&&(m.current.terminate(),console.log("Summarization worker terminated."))}),[]);let f=(0,o.useCallback)(()=>new Promise((e,t)=>{if(s)return void e(!0);if(g.current){console.log("Summarization model is currently loading. Please wait."),e(!1);return}m.current?(console.log("Initializing summarization model loading..."),c("Initializing summarization model loading..."),g.current=!0,p.current={resolve:e,reject:t},m.current.postMessage({type:"load_model"})):(console.error("Summarization worker not initialized."),g.current=!1,t(Error("Summarization worker not available.")))}),[s]),h=(0,o.useCallback)(async function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(a)return void console.log("Summarization is already in progress.");if(!e||!e.trim())return void console.log("No transcription text to summarize.");let o=localStorage.getItem("notedPakSettings"),n=null,l={stt:{whisperModel:"whisper_base_f32"},llm:{type:"local",localModel:"llama-3.1-8b",openai:{apiToken:"",baseUrl:"https://api.openai.com/v1",modelName:"gpt-4"}}};if(o)try{let e=JSON.parse(o);e.stt&&e.llm&&e.llm.type&&e.llm.openai&&"string"==typeof e.llm.openai.apiToken?n=e:(n=l,localStorage.setItem("notedPakSettings",JSON.stringify(l)))}catch(e){n=l,localStorage.setItem("notedPakSettings",JSON.stringify(l))}else n=l,localStorage.setItem("notedPakSettings",JSON.stringify(l));let i=!1;if("local"===n.llm.type)if(s)i=!0;else{console.log("Local summarization model not ready. Attempting to load/ensure readiness...");try{let e=await f();if(!0===e)i=!0;else if(!1===e)return void console.log("Local summarization model is already in the process of loading. Please wait.")}catch(e){console.error("Error during summarization model loading:",e.message);return}}else i=!0;if(!i)return void console.log("Summarization cannot proceed: Model (local or other) is not ready or conditions not met.");m.current?(t(""),console.log("Starting summarization with settings:",n),m.current.postMessage({type:"summarize",data:{transcriptionText:e,meetingTitle:r,settings:n}})):console.error("Summarization worker not initialized for summarization.")},[a,s,f]),x=(0,o.useCallback)(()=>{a&&m.current&&m.current.postMessage({type:"interrupt_summarization"})},[a]);return{summaryText:e,isSummarizing:a,summarizationModelReady:s,summarizationModelLoadingProgress:i,summarizationState:d,isLoadingSummarizationModelRef:g,handleStartSummarization:h,interruptSummarization:x}};function ed(){let{isTranscribing:e,confirmedText:t,unconfirmedTextPreview:r,modelReady:s,isMicMuted:l,isPaused:i,modelLoadingProgress:c,isStarting:d,handleStartTranscription:u,handleStopTranscription:m,handlePauseTranscription:g,handleResumeTranscription:p,handleToggleMic:f}=ei(),{summaryText:h,isSummarizing:x,summarizationModelReady:y,summarizationModelLoadingProgress:b,summarizationState:v,isLoadingSummarizationModelRef:w,handleStartSummarization:k,interruptSummarization:j}=ec(),[N,S]=(0,o.useState)(""),[A,T]=(0,o.useState)(""),C=t+(r?" ".concat(r):""),M=async()=>{await u()},z=async()=>{!A.trim()||x||w.current||await k(A,N)};return(0,o.useEffect)(()=>{c&&console.log("Model Loading Progress: ".concat(c))},[c]),(0,o.useEffect)(()=>{T(C)},[C]),(0,a.jsxs)("div",{className:"w-full min-h-screen bg-white dark:bg-black transition-colors duration-200 p-6","data-oid":"dto1tku",children:[(0,a.jsxs)("div",{className:"mb-8","data-oid":"_6lxio0",children:[(0,a.jsx)("h1",{className:"text-3xl md:text-4xl font-bold text-gray-900 dark:text-gray-100 mb-2","data-oid":"jbld_w7",children:"Meeting Transcription and Stuff"}),(0,a.jsx)("p",{className:"text-lg text-gray-600 dark:text-gray-400","data-oid":"q14vrrn",children:"Record, transcribe, and enhance your meeting conversations"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 h-[calc(100vh-200px)]","data-oid":"hb3:.5h",children:[(0,a.jsxs)("div",{className:"flex flex-col space-y-6","data-oid":"k0bxpfl",children:[(0,a.jsxs)("div",{className:"bg-gray-50 dark:bg-gray-900 rounded-lg p-6","data-oid":"mbhs:q3",children:[(0,a.jsxs)("div",{className:"mb-6","data-oid":"8fvsjip",children:[" ",(0,a.jsx)("label",{htmlFor:"meeting-title",className:"block text-lg font-medium text-gray-700 dark:text-gray-300 mb-2","data-oid":"l1127rq",children:"Meeting Title"}),(0,a.jsx)("input",{id:"meeting-title",type:"text",value:N,onChange:e=>S(e.target.value),placeholder:"Enter meeting title (e.g., Weekly Team Standup)",className:"w-full px-4 py-3 text-lg border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 placeholder-gray-500 dark:placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent","data-oid":"8i:8c47"})]}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-3","data-oid":"evw7onq",children:[(0,a.jsxs)("button",{onClick:e?()=>{i?p():g()}:M,disabled:d,className:"px-6 py-3 text-white rounded-lg font-medium transition-colors duration-200 flex items-center gap-2 ".concat(d?"bg-gray-500 cursor-not-allowed":e?i?"bg-green-600 hover:bg-green-700":"bg-yellow-600 hover:bg-yellow-700":"bg-green-600 hover:bg-green-700"),"data-oid":"qou-2oq",children:[d?(0,a.jsx)("div",{className:"w-3 h-3 bg-white animate-pulse","data-oid":"znmt.:h"}):!e||i?(0,a.jsx)("svg",{viewBox:"0 0 24 24",className:"w-4 h-4 fill-white",xmlns:"http://www.w3.org/2000/svg","data-oid":":0-oup-",children:(0,a.jsx)("path",{d:"M8 5v14l11-7z","data-oid":"4nxqhm8"})}):(0,a.jsx)("svg",{viewBox:"0 0 24 24",className:"w-4 h-4 fill-white",xmlns:"http://www.w3.org/2000/svg","data-oid":"n:dau1-",children:(0,a.jsx)("path",{d:"M6 19h4V5H6v14zm8-14v14h4V5h-4z","data-oid":"na3zbrc"})}),d?"Starting...":e?i?"Resume":"Pause":"Start Recording"]}),(0,a.jsxs)("button",{onClick:()=>{m(),x&&j()},disabled:!e,className:"px-6 py-3 bg-red-600 hover:bg-red-700 disabled:bg-gray-400 text-white rounded-lg font-medium transition-colors duration-200 flex items-center gap-2","data-oid":"41wq.vo",children:[(0,a.jsx)("div",{className:"w-3 h-3 bg-white","data-oid":"kw.zor_"}),"Stop Recording"]}),(0,a.jsx)("button",{onClick:f,disabled:!e||d,className:"px-6 py-3 text-white rounded-lg font-medium transition-colors duration-200 flex items-center gap-2 ".concat(!e||d?"bg-gray-400 cursor-not-allowed":l?"bg-blue-600 hover:bg-blue-700":"bg-orange-500 hover:bg-orange-600"),title:e?l?"Unmute Microphone":"Mute Microphone":"Start recording to control mic","data-oid":"xr3j-t-",children:l?(0,a.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5","data-oid":"q90b3h8",children:[(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 18.75a6 6 0 0 0 6-6v-1.5m-6 7.5a6 6 0 0 1-6-6v-1.5m6 7.5v3.75m-3.75 0h7.5M12 15.75a3 3 0 0 1-3-3V4.5a3 3 0 1 1 6 0v8.25a3 3 0 0 1-3 3Z","data-oid":".xc_l.4"}),(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m3 3 18 18","data-oid":"1nv-7ap"})]}):(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5","data-oid":".ygwcgc",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 18.75a6 6 0 0 0 6-6v-1.5m-6 7.5a6 6 0 0 1-6-6v-1.5m6 7.5v3.75m-3.75 0h7.5M12 15.75a3 3 0 0 1-3-3V4.5a3 3 0 1 1 6 0v8.25a3 3 0 0 1-3 3Z","data-oid":"2e47_xy"})})}),(0,a.jsx)(H,{"data-oid":":ga-5uu"})]}),(0,a.jsx)("div",{className:"mt-4","data-oid":"tezy9b5",children:(0,a.jsxs)("div",{className:"flex items-center gap-2","data-oid":"yp:1g07",children:[(0,a.jsx)("div",{className:"w-3 h-3 rounded-full ".concat(e?i?"bg-yellow-500":"bg-green-500 animate-pulse":s?"bg-gray-400":"bg-blue-500 animate-pulse"),"data-oid":"opl-s5i"}),(0,a.jsx)("span",{className:"text-sm text-gray-600 dark:text-gray-400","data-oid":"lq:cvrz",children:d?"Loading model...":e?i?"Recording Paused (Mic: ".concat(l?"Muted":"On",")"):"Recording Active (Mic: ".concat(l?"Muted":"On",")"):s?"Ready to Record":"Click Start to Record"})]})})]}),(0,a.jsxs)("div",{className:"flex-1 bg-gray-50 dark:bg-gray-900 rounded-lg p-6","data-oid":":r76ru2",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-4","data-oid":"ahe1_sf",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900 dark:text-gray-100","data-oid":"gzkhr_v",children:"Live Transcription"}),(0,a.jsx)("button",{onClick:x?j:z,disabled:!A.trim()||e||!x&&w.current,className:"px-4 py-2 text-white rounded-lg font-medium transition-colors duration-200 ".concat(x?"bg-red-600 hover:bg-red-700":w.current?"bg-gray-400 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700"," disabled:bg-gray-400"),"data-oid":"y23fovk",children:x?"Cancel Summarization":w.current?"Loading Model...":"Enhance Transcription"})]}),(0,a.jsx)("div",{className:"h-full min-h-[300px] bg-white dark:bg-gray-800 rounded-lg p-4 border border-gray-200 dark:border-gray-700","data-oid":"x3lh--o",children:(0,a.jsx)("textarea",{value:A,onChange:e=>T(e.target.value),placeholder:s?"Transcription will appear here as you speak...":"Loading transcription model...",className:"w-full h-full resize-none border-none outline-none bg-transparent text-gray-900 dark:text-gray-100 text-sm leading-relaxed","data-oid":"1i-7s3l"})})]})]}),(0,a.jsx)("div",{className:"flex flex-col","data-oid":"8t:ad_7",children:(0,a.jsxs)("div",{className:"bg-gray-50 dark:bg-gray-900 rounded-lg p-6 h-full","data-oid":"lca24.6",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900 dark:text-gray-100 mb-4","data-oid":"w4pt:0b",children:"Meeting Enhancement"}),(0,a.jsx)("div",{className:"h-full min-h-[400px] bg-white dark:bg-gray-800 rounded-lg p-4 border border-gray-200 dark:border-gray-700 overflow-y-auto flex flex-col","data-oid":"k_v4m0y",children:w.current&&!y&&!x||x&&"thinking"===v?(0,a.jsx)("div",{className:"flex items-center justify-center h-full","data-oid":"lahv_3.",children:(0,a.jsxs)("div",{className:"text-center","data-oid":"hh0tr:5",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4","data-oid":"zwznm67"}),(0,a.jsx)("p",{className:"text-gray-600 dark:text-gray-400","data-oid":"rlojq_6",children:x&&"thinking"===v?"Thinking...":b||"Loading summarization model..."}),x&&"thinking"===v&&(0,a.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"The model is processing the information."})]})}):(0,a.jsx)(a.Fragment,{children:(0,a.jsx)("div",{className:"flex-grow text-gray-900 dark:text-gray-100 text-sm leading-relaxed prose dark:prose-invert","data-oid":"w5bttnp",children:h?(0,a.jsx)(n.oz,{children:h}):!x&&!w.current&&(0,a.jsx)("div",{className:"flex items-center justify-center h-full","data-oid":"djxws0r",children:(0,a.jsxs)("p",{className:"text-gray-500 dark:text-gray-400 text-center","data-oid":"m_94wji",children:[!b||y||w.current?"Enhanced transcription will appear here after processing.":b,(0,a.jsx)("br",{"data-oid":"scenlgf"}),!b&&(0,a.jsx)("span",{className:"text-sm","data-oid":"ajmvexu",children:'Click "Enhance Transcription" to get started.'})]})})})})})]})})]})]})}},6287:(e,t,r)=>{Promise.resolve().then(r.bind(r,2385))}},e=>{var t=t=>e(e.s=t);e.O(0,[35,889,441,684,358],()=>t(6287)),_N_E=e.O()}]);